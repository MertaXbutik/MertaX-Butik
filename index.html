<!doctype html>
<html lang="mk">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>MertaX Butik</title>

<style>
body{margin:0;font-family:Arial;background:#f4f4f4}
header{background:#000;color:#fff;text-align:center;padding:18px;font-size:26px}
nav{background:#111;text-align:center;padding:10px}
nav a{color:#fff;margin:0 14px;text-decoration:none;font-weight:700}
.container{max-width:1100px;margin:auto;padding:18px}
.hero{background:linear-gradient(135deg,#000,#333);color:#fff;border-radius:14px;padding:30px;text-align:center;margin:18px 0}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:14px}
.card{background:#fff;border-radius:14px;overflow:hidden;border:1px solid #eee;padding:10px}
.card img{width:100%;height:220px;object-fit:cover}
.price{font-weight:900}
.stocklist{font-size:13px;color:#555;margin:6px 0}
button{padding:8px 10px;border-radius:8px;border:0;cursor:pointer}
.primary{background:#22c55e;color:#052e12;font-weight:800}
.dark{background:#111;color:#fff}
</style>
</head>

<body>

<header>MertaX Butik</header>

<nav>
<a href="#pocetna">–ü–æ—á–µ—Ç–Ω–∞</a>
<a href="#proizvodi">–ü—Ä–æ–∏–∑–≤–æ–¥–∏</a>
<a href="#kontakt">–ö–æ–Ω—Ç–∞–∫—Ç</a>
</nav>

<div class="container" id="pocetna">
<div class="hero">
<h1>–î–æ–±—Ä–µ–¥–æ—ò–¥–æ–≤—Ç–µ –≤–æ MertaX</h1>
<p>–ú–æ–¥–µ—Ä–µ–Ω —Å—Ç–∏–ª. –í—Ä–≤–µ–Ω –∫–≤–∞–ª–∏—Ç–µ—Ç.</p>
</div>

<h2 id="proizvodi">–ü—Ä–æ–∏–∑–≤–æ–¥–∏</h2>
<div class="grid" id="grid"></div>
</div>

<div class="container" id="kontakt">
<h2>–ö–æ–Ω—Ç–∞–∫—Ç</h2>
<p>üìû –¢–µ–ª–µ—Ñ–æ–Ω: <b>+389 72 912 601</b></p>
<p>üìß Email: <b>mertax@example.com</b></p>
</div>

<script>

// ===== DEFAULT PRODUCTS =====
const DEFAULT_PRODUCTS = [
{
id:"majca",
name:"–ú–∞—ò—Ü–∞ MertaX",
price:1200,
img:"https://via.placeholder.com/600x400?text=Majca",
sizes:{S:2,M:3,L:1,XL:1,"2XL":1,"3XL":1}
},
{
id:"dukser",
name:"–î—É–∫—Å–µ—Ä MertaX",
price:2500,
img:"https://via.placeholder.com/600x400?text=Dukser",
sizes:{S:0,M:2,L:2,XL:1,"2XL":1,"3XL":1}
},
{
id:"jakna",
name:"–à–∞–∫–Ω–∞ MertaX",
price:3900,
img:"https://via.placeholder.com/600x400?text=Jakna",
sizes:{M:1,L:1,XL:1,"2XL":1,"3XL":1}
}
];

const LS_KEY = "mertax_products_v2";

// ===== SAFE CLONE =====
function clone(x){
return JSON.parse(JSON.stringify(x));
}

// ===== LOAD PRODUCTS =====
function loadProducts(){
const raw = localStorage.getItem(LS_KEY);

if(!raw){
localStorage.setItem(LS_KEY,JSON.stringify(DEFAULT_PRODUCTS));
return clone(DEFAULT_PRODUCTS);
}

try{
const parsed = JSON.parse(raw);

if(!Array.isArray(parsed) || parsed.length===0){
throw "bad";
}

return parsed;
}catch(e){
localStorage.setItem(LS_KEY,JSON.stringify(DEFAULT_PRODUCTS));
return clone(DEFAULT_PRODUCTS);
}
}

let products = loadProducts();

// ===== RENDER =====
function render(){
const grid=document.getElementById("grid");
grid.innerHTML="";

products.forEach(p=>{
const sizes=Object.entries(p.sizes).map(([s,q])=>`<span>${s} - ${q}</span>`).join(" ");

const card=document.createElement("div");
card.className="card";
card.innerHTML=`
<img src="${p.img}">
<h3>${p.name}</h3>
<div class="price">${p.price} –¥–µ–Ω.</div>
<div class="stocklist">${sizes}</div>
`;
grid.appendChild(card);
});
}

render();

</script>
</body>
</html>
